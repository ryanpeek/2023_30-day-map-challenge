---
title: '2023 30-day Map Challenge • Day 07 • Navigation'
author: 'Ryan Peek'
execute:
  echo: false
  warning: false
  message: false
format: 
  html:
    self-contained: true
    code-overflow: wrap
    code-fold: true
    code-tools: true
    code-block-bg: true
    code-block-border-left: "#31BAE9"
    theme: journal #litera #default
    highlight-style: arrow
editor_options: 
  chunk_output_type: console
---

## Navigation: National Historical Trials &  Native Lands National Trails (NLNT)

Maps tell stories as well as help one navigate. While we have many maps of post-colonial trails, it is much harder to find data that documents Indigenous places, trails, and knowledge. It is not that these don't exist, they just don't get put on maps. 

The map below is a combination of [National Historical Trails in the western US](https://www.nps.gov/orgs/1453/gis-data.htm), and a recent version of Indigenous Territories in the Western US from [Native Land Digital](https://native-land.ca/resources/api-docs/). 

A recent effort to provide an interactive GIS map of indigenous resources to help advance knowledge of Indigenous ancestral lands is called [Native Lands National Trails](https://experience.arcgis.com/experience/c98b415eb4b44081a6dcb9e824785846/page/NLNT-Homepage/). This is in part to help advance National Trails System knowledge of Indigenous ancestral Lands and increase partnerships and collaboration with Indigenous Communities along National Scenic and National Historic Trails.

I highly recommend checking out the map and reading the resources section and read the acknowledgement statement.^[Also look at the beautiful logo designed by Autry Lomahongva!].

![NLNT Icon: Autry Lomahongva](https://www.arcgis.com/sharing/rest/content/items/c98b415eb4b44081a6dcb9e824785846/resources/images/widget_660/1668076915743.png)

## Data

```{r}
#| label: the-data
#| message: false
#| warning: false
#| echo: false
#| eval: false

library(tidyverse)
library(hrbrthemes)
#library(geojsonsf)
library(rnaturalearth)
library(glue)
library(terra)
library(ggtext)
library(sf)
library(patchwork)
sf::sf_use_s2(FALSE)
library(showtext)
extrafont::fonts() # get fonts avail
font_add_google("Abel", "abel")
#showtext_auto()

# Get Territory Data ----------------------------------------------------------------

territories <- st_read("https://149613070.v2.pressablecdn.com/coordinates/indigenousTerritories.json")

territories <- st_cast(territories, "MULTIPOLYGON")
# and make valid
territories$geometry <- lwgeom::lwgeom_make_valid(territories$geometry)

# cleanup valid geometries
terr_clean <- territories[st_is_valid(territories),]

# get an area to crop by
country_name <- "United States of America"
states <- rnaturalearth::ne_states(country = glue("{country_name}"), returnclass = "sf") |> 
  filter(postal %in% c("WA","ID","OR","NV","AZ","CA","UT","MT","WY","CO","NM"))

# crop by area
terr_crop <- terr_clean |> st_intersection(states)
terr_crop_distinct <- terr_crop |> 
  distinct(Name, .keep_all = TRUE)
#plot(states$geometry, col="gray")
#plot(terr_crop$geometry, add=TRUE, border="forestgreen")

# Get trail data ---------------------------------------------

nht_ca <- st_read("~/Downloads/cali_nht_100k_line/cali_nht_100k_line.shp") |> 
  st_transform(4326) |> 
  st_intersection(states)
nht_or <- st_read("~/Downloads/oreg_nht_100k_line/oreg_nht_100k_line.shp") |> 
  st_transform(4326) |> 
  st_intersection(states)
nht_pe <- st_read("~/Downloads/poex_nht_100k_line/poex_nht_100k_line.shp") |> 
  st_transform(4326) |> 
  st_intersection(states)
nht_os <- st_read("~/Downloads/olsp_nht_line/olsp_nht_line.shp") |> 
  st_transform(4326) |> 
  st_intersection(states)
nt_pct <- st_read("~/Downloads/Full_PCT/Full_PCT.shp") |> 
  st_transform(4326) |> st_zm() |> 
  st_intersection(states)

# plot(states$geometry)
# plot(nht_ca$geometry, col="brown", add=TRUE)
# plot(nht_or$geometry, col="tan", add=TRUE)
# plot(nht_pe$geometry, col="purple4", add=TRUE)
# plot(nht_os$geometry, col="blue", add=TRUE)
# plot(nt_pct$geometry, col="forestgreen", add=TRUE)

# add a text box
df_text_box <- tibble(
  x=0, y=0,
  #x = -112.879,
  #y = 46.1314,
  label = "<b style='color:#000080;'>Maps tell stories, and not always by the lines that you see.</b> This is a map of National Historical Trails and the Pacific Crest Trail. These are often depicted as paths to navigate new and largely empty land. However, the map on the right depicts Indigenous Territories over the same area. How many trails were known that remain unmapped? Check out <b style='color:#000080;'>Native Lands, National Trails Map</b> for more info.")


# plot trails ---------
g1 <- ggplot() + 
  geom_sf(data=states, color="gray70", alpha=0.5, fill=NA, lwd=.3) +
  geom_sf(data=nht_ca, linewidth=0.4, color=alpha("brown4",0.9)) +
  geom_sf(data=nht_or, linewidth=0.4, color=alpha("chartreuse4",0.9)) +
  geom_sf(data=nht_pe, linewidth=0.5, color=alpha("darkgoldenrod1",0.9)) +
  geom_sf(data=nht_os, linewidth=0.25, color=alpha("blue4",0.9)) +
  geom_sf(data=nt_pct, linewidth=0.45, color=alpha("darkcyan",0.9)) +
  #geom_textbox(
  #  data = df_text_box,
  #  aes(x=x, y=y, label = label), size=2.5,
  #  width = grid::unit(0.65, "npc"), # 33% of plot panel width
  #  hjust = 0.2, vjust = 0.42)+ 
  theme_ipsum_gs(base_family = "Barlow", plot_title_size = 24,
              subtitle_size = 18, caption_size = 12,caption_family = "Roboto Condensed") +
  coord_sf(datum = NA)+
  labs(title=glue("Trails: Mapped and Unmapped"), y="", x="",
       subtitle = "#30DayMapChallenge • Day-06 • Navigation",
       caption = "Data: <https://www.nps.gov/orgs/1453/gis-data.htm>") +
  theme(plot.caption = element_text(hjust=-.3))

g1

# plot territories ------------
g2 <- ggplot() + 
  geom_sf(data=terr_crop, aes(fill=Name), alpha=0.5, show.legend = FALSE) +
  geom_sf(data=states, color="gray30", alpha=0.8, fill=NA, lwd=.3) +
  ggrepel::geom_text_repel(data=terr_crop_distinct, 
                           aes(label=Name, geometry=geometry), 
                           stat = "sf_coordinates", 
                           force_pull = 0.3, force = .5,
                           min.segment.length = .2, size=3,
                           color="white",
                           bg.color = "#3B528BFF", bg.r = 0.12,
                           max.overlaps = 20,
                           segment.size  = 0.2,
                           segment.color = "grey50") +
  colorspace::scale_fill_discrete_qualitative() +
  theme_ipsum_gs(base_family = "Barlow", plot_title_size = 24,
              subtitle_size = 18, caption_size = 12, 
              caption_family = "Roboto Condensed") +
  coord_sf(datum = NA)+
  labs(title="", y="", x="",
       caption="R. Peek • <https://github.com/ryanpeek/2023_30-day-map-challenge/> \n  Data from <https://native-land.ca/resources/api-docs/> and National Historic Trails")

g2

# text box
gtxt <- ggplot() +
  ggtext::geom_textbox(data=df_text_box, aes(x = x, y = y, label=label),
    box.color = NA, width = unit(10, "lines"),
    family = "Roboto Condensed", 
    color = "grey30", size = 3, lineheight = 1.3) +
  coord_cartesian(expand = FALSE, clip = "off") +
  theme_void()

gtxt

# plot together -----------
#(see here: https://rstudio-conf-2022.github.io/ggplot2-graphic-design/materials/08_layout.html#/add-inset-plots)

g1 + g2 + inset_element(gtxt, l = -.4, b = .5, r = -.1, t = .8)


# save ----------
ggsave(filename = glue("figs/day07-navigation.png"), dpi=300,
       width = 11, height = 8.5)

```

```{r}
knitr::include_graphics("figs/day07-navigation.png")

```


